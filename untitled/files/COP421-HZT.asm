	cpu COP420
	page 0
	
;********************************************************************
;
;              Apple LISA I/O Board - COP421-HZT firmware
;                         Version 341-0064-A 
;            original code (c) by Apple Computer Inc., 1983
;
;   dumped and disassembled by Patrick Schaefer, 2016
;
;   Last changes: 2016-01-23 PS
;
;********************************************************************
	
	
	org 0x000
_0000	CLRA
	OGI 0xF		
	RC
	JSR _03EC
	SKC		
	JP _000C
	RC
	XAS
	SC
	JP _000D
	
_000C	XAS
_000D	SKE		
	JMP 0x2F8
	JSR 0x256
	SKC		
	JP _0019
	JSRP _008C
	LBI 2, 0xE
	STII 0xF
	STII 0xE
	JSRP _008F
_0019	JSR _0040
	JSR _01FA
	JSR _0077
	JSR _0040
	JSR _0124
	JSR _0040
	SKT
	JP _002B
	JSR _027B
	JSR _01BE
_002B	JSR _00FF
	JP _0019
	
_002E	db 0x60, 0x19, 0x73, 0x61
	db 0x69, 0x73, 0x69, 0x73
	db 0x73, 0x61, 0x61, 0x73
	db 0x73, 0x69, 0x73, 0x69
	db 0x61, 0x73
	
; Page 1
_0040	LBI 0, 0x9 
	OBD
	ING
	LBI 3, 0xC
	X 0x0
	RMB 2
	RMB 3
	SKMBZ 0	
	AISC 0x4
	SKMBZ 1		
	AISC 0x8
	LBI 2,0x2
	JSRP _009F
	LBI 0,0xB
	OBD
	ING
	LBI 3,0xD
	X 0
	RMB 2
	RMB 3
	SKMBZ 0
	AISC 0x4
	SKMBZ 1
	AISC 0x8
	LBI 3,0x2
	JSRP _009F	
	RET 
	
_0061	XDS 0
	SC
_0063	CLRA
	ASC
	JP _006F
	XDS 0
	JP _0063
	JP _0070
	XDS 0
	RC
_006B	CLRA
	AISC 0xF
	ASC
	JP _0074
_006F	X 0
_0070	LBI 2,0x6
	RMB 3
	RET
	
_0074	XDS 0
	JP _006B
	JP _0070
_0077	SKGBZ 2
	RET
	JSRP _00A3
	SKGBZ 2
	RET
	JMP _0253
; Page 2
_0080	XAD 2,0x9
	AISC 0x1
	NOP
	AISC 0xF
	JP _0089
	XAD 2,0x9
	JP _00DB 
_0089	XAD 2,0x9
_008B	JP _00DF
_008C	LBI 2, 0xE
	STII 0x8
	STII 0x0
_008F	LBI 3,0x9
	SKMBZ 0
	JP _00CD
	SMB 0
	LBI 2, 0xE
	XIS 0
_0095	CAMQ
	LEI 0x5 
	LEI 0xD
	LEI 0x1
_009D	NOP
_009E	RET
	
_009F	X 0
	CLRA
	AISC 0x3
	JID
_00A3	SKT
	JP _00A3
	JMP _027B

_00A7	LBI 3,0xE
	STII 0x8
	STII 0x0
_00AA	LBI 3,0xE
_00AB	SKGBZ 0
	JP _00AB
_00AE	SKGBZ 0
	JP _00B2 
	JP _00AE
_00B2	SKGBZ 0
	JP _00DD
_00B5	SC
	XAS
_00B7	RC
	SKMBZ 0
	SC
	XAS
	RC
	SKMBZ 1
	SC
	XAS
	RC
; Page 3
	SKMBZ 2 
	SC
	XAS
	RC
	SKMBZ 3
	SC
	XAS
	X 0
	XIS 0
	JP _00B7
	RC
	XAS
	RET
	
_00CD	SMB 2
	LBI 2, 0xC
	LD 0
	AISC 0x2 
	NOP
	X 0
	LD 0
	LBI 0,0x0
	CAB
	LDD 2,0xE
	XIS 0
	LDD 2,0xF
_00DB	X 0
	RET

_00DD	JMP _00B5
_00DF	XOR
	XAD 2,0xD 
	LDD 2,0xD
	X 0
	XAD 2,0xC
	ING
	SKE
	JP _00F7
	CLRA
_00EC	AISC 0x1
	JP _00EC
	ING
	SKE 
	JP _00F7
	LDD 2,0xC
	X 0
	CLRA
	RETSK
	
_00F7	X 0
	LDD 2,0xC
	XOR
	X 0
	LDD 2,0xC
	RET

_00FF	LEI 0 
; Page 4	
	LBI 3,0x9
	SKMBZ 0
	SKMBZ 3
	RET
	RC
	XAS
	AISC 0xF
	JP _010A
	RET
	
_010A	SKMBZ 2
	JP _0114
	RMB 0
	CLRA
	XAD 2,0x4
	AISC 0x1
	RET
	
_0112	JMP _0239
_0114	LBI 2, 0x0D
	LD 0
	AISC 0x2
	NOP
	XDS 0
	LDD 2, 0xD
	SKE
	JP _011F
	LBI 3, 0x9
	RMB 2
_011F	LBI 0,0x0
	CAB
	XIS 0
	JMP _0095
_0124	LBI 3,0xF
	OBD
	LBI 3,0x9
	SKMBZ 2
	JP _012B
	JP _0133
_012B	LDD 2,0xC
	LBI 2,0xD
	SC
	CASC
	NOP
	AISC 0x8
	RET
	
_0133	SKGBZ 0
	JP _0138
	JMP _0183
_0138	LDD 3,0x8
	AISC 0x1
	JMP _018D
	LEI 1
	SC
; Page 5
	LBI 3,0xE 
	XAS
	LDD 3,0x3
	XIS 0
	RC
	XAS
	LDD 3,0x4 
	X 0
	LBI 2,0xE
	SKGBZ 0
 	JP _017D
_014E	SMB 0
	SKGBZ 0
	RMB 0
	SMB 1
	SKGBZ 0
	RMB 1
	SMB 2
	SKGBZ 0 
	RMB 2
	SMB 3
	SKGBZ 0
	RMB 3
	X 0
	XIS 0
	JP _014E 
_0161	LBI 3,0x5
	SKGBZ 0
	JP _0168
	JMP _0183
	
_0168	SKMBZ 3
	JP _016D
_016A 	JSRP _008F
	JMP _0133
	
_016D	LDD 2,0xE
	SKE
	JP _016A 
	LBI 2,0xF
	LDD 3,0x6
	SKE
	JP _016A
	JSRP _00A3
	OGI 0xB 
	JSRP _00A3
	OGI 0xF
	RET
	
_017D	LBI 3,0xE
	SKGBZ 0
; Page 6 
	JP _0182
_0181	JSRP _00B5
_0182	JP _018D

_0183	CLRA
	XAD 3,0x8
	AISC 0x1
	JP _018D
	JSRP _008C 
	LBI 2,0xE
	STII 0xF
	STII 0xD
	JSRP _008F
_018D	LBI 2,0xF
	STII 0x5
	LBI 2,0x9
_0190	SKGBZ 1
	JP _01A0
_0193	SKMBZ 0
	JP _0197
	RMB 1
	JP _01AC
	
_0197	SKMBZ 1
	JP _019E 
	RMB 0
	LBI 2,0xE
	STII 0x8
	JMP _008F
	
_019E	RMB 1
	JP _01AC
	
_01A0	SKMBZ 0
	JP _01AB
	SKMBZ 1
	JP _01A6
	SMB 1
	JP _01AC
	
_01A6	SMB 0
	LBI 2,0xE
	STII 0x0 
	JMP _008F
	
_01AB	SMB 1
_01AC	LBI 2,0xF
	SKMBZ 1
	JP _01B8
	STII 0x6
	LBI 2,0xD
	OBD
	LBI 2,0xA
	SKGBZ 0
	JP _01A0
	JP _0193
	
_01B8	SKMBZ 0
	JMP _026E
	STII 0x7
	LBI 2,0xB
	JP _0190
	
_01BE	LBI 3,0x7
; Page 7
	SKMBZ 3 
	JP _01C3
	RET
	
_01C3	LBI 2,0x6
	SKMBZ 3
	RET
	
_01C7	LD 0
	AISC 0xF
	JP _01CC
	X 0
	RET
	
_01CC	LBI 3,0x9
	SKMBZ 0
	RET
	LDD 3,0x7
	XAD 2,0x6
	LBI 2,0xE
	STII 0x0
	STII 0x0
	JSRP _008F
	LBI 2,0x0
	JSR _01DB
	LBI 3,0x0
_01DB	LD 0
	STII 0x0
	XAD 2,0xE
	LD 0
	STII 0x0 
	XAD 2,0xF
	JMP _008F
	
	org 0x1e5
_01E5	LBI 0,0x0
_01E6	SKT
	JP _01E6
	LD 1
	AISC 0x1
	SC
	LD 3
	AISC 0x1
	SC
	LD 1
	AISC 0xF
	JP _01F2 
	SC
_01F2	LD 0
	AISC 0xF
	JP _01F6
	SC
_01F6	LD 0
	XIS 3
	JP _01E6
	RET
	
_01FA	LBI 0,0x1
	OBD
	LBI 3, 0x9
	OBD
	LBI 3, 0xA
	INL
	SKMBZ 3
	RET
	X 0
	AISC 0xD
	JP _020F
	AISC 0x3
_020A	CAB
	LDD 3, 0xA
	X 0
	RET
	
_020F	AISC 0x1
	JP _021B
	XIS 0
	X 0
	SKMBZ 2
	JP _0217
	JMP _0256
	
_0217	LBI 2,0x3 
	STII 0xF
	RET
	
_021B	AISC 0x1
	JP _0233
	LBI 3, 0xB
	SKMBZ 3
	JP _0221
	RET

_0221	LBI 2,0x3
	LD 0
	AISC 0xF
	NOP
	X 3
	JP _020A
_0228	LBI 2,0x4
	STII 0xF
	RET

_022C	RMB 3
	AISC 0x1
	JMP _010A
	SMB 3
	SMB 0
	RET
	
_0233	LD 0
	LBI 3,0x9
	AISC 0xE
	JP _022C
	SKMBZ 0
	JP _0228
_0239	JSRP _008C
	LBI 2,0xE
	STII 0xE
	LDD 1,0xA
	X 0
	JSRP _008F
; Page 9
	LBI 3,0xA
	STII 0xB
_0242	LBI 3,0xA
	LD 0
	AISC 0xE
	RET
	X 0
	LD 0
	LBI 1,0
	CAB
	LD 0
	XDS 0
	XAD 2,0xE
	LD 0
	XAD 2,0xF 
	JSRP _008F
	JP _0242
_0253	SKGBZ 2
	RET
	
_0256	LBI 3,0x9
	SMB 3
	SMB 0
	JSRP _00A3
	LBI 0,0
	OBD
_025D	JSRP _00A3
	SKGBZ 3
	JP _025D
	JSRP _00A3
	SKGBZ 3
	JP _025D
	LBI 2,0x9
_0266	STII 0x3
	STII 0x3
	STII 0x3
	LBI 3,0xB
	SMB 2
	OBD
	JP _0276
_026E	SKGBZ 3
	RET
	JSRP _008C
	LBI 2,0xE
	STII 0xF
	STII 0xB
	JSRP _008F
_0276	SKGBZ 3
	RET
	JSRP _00A3
	JP _0276

_027B	LBI 2,7
	LD 0
	AISC 0x1
	JP _02A6	
; Page A
	STII 0x4 
	LD 0
	AISC 0x1
	JP _02A6
	STII 0xE
	LDD 3,0x8
	AISC 0x1
	XAD 3,0x8
	LBI 3,0xB
	SKMBZ 0
	JP _0290
	SKMBZ 1
	JP _0290
	JP _02A7
_0290	LBI 1,0x0
	JSR _02D7
	JP _02A7
	LBI 3,0xB
	SKMBZ 1
	JMP _02E0
_0298	LBI 1,0x1
	JSR _02D7
	JP _02A7
	AISC 0xB
	JP _02A4
	XIS 0
	JSR _02D7
	JP _02A7
	AISC 0xB
_02A4	AISC 0x6
	JP _02A8
_02A6	X 0
_02A7	RET
	
_02A8	XIS 0
	JSR _02D7
	JP _02AE
	AISC 0x1
	JP _02A6
_02AE	LDD 1,0x6
	AISC 0xE 
	RET
	
_02B2	LD 0
	AISC 0xC
	RET
	
_02B5	STII 0x0
	STII 0x0
	JSR _02D7 
	JP _02BE
_02BA	JSR _02D7
	RET
	
_02BD	JP _02BA
_02BE	LDD 1,0x9
; Page B
	AISC 0xD 
	RET
	
_02C2	LDD 1,0x8
	AISC 0xA
	RET	
	LD 0
	LBI 1,0xA
	SKMBZ 0
	JP _02CB
	SKMBZ 1
_02CB	AISC 0x1
	AISC 0x9
	RET
	
_02CE	LBI 1,0x7
	STII 0x1 
	STII 0x0
	STII 0x0
	LD 0
	AISC 0x1
	NOP
	JP _02DB
_02D7	LD 0
	AISC 0x7 
	AISC 0xA
	JP _02DD
_02DB	X 0
	RET
	
_02DD	XIS 0
	LD 0
	RETSK
	
_02E0	LBI 1,0xB 
	RC
_02E2	CLRA
	AISC 0xF
	ASC
	JP _02E9
	X 0
	JMP _0298 
_02E9	XIS 0
	JP _02E2
	LBI 3,0xB
	RMB 1
	SKMBZ 0
	OBD
	SMB 0
	JSRP _008C
	LBI 2,0xE
	STII 0xF
	STII 0xC
	JSRP _008F
	JMP _0298
	
_02F8	LEI 9
	SKGBZ 3
	JMP _0305
	LBI 0,0
	INL
; Page C
	LBI 3,0
	CAB
	JMP _03F9
_0305	SKC
	JP _030C
	JSRP _00A7
	LBI 3,0xE
	STII 0xF
	STII 0xF
	JSRP _00AA
_030C	RC	
	STII 0xF
	OBD
	STII 0xF
	OBD
	XAS
	LBI 2,0xA
	X 0
	JSRP _00A7
	LBI 2,0xA
	CLRA
	SKE
	JP _0321
	LBI 3,0xE
	INL	
	XAD 3,0xF
	JP _0326
_0321	AISC 0x1
	X 0
	LBI 3,0xE
	STII 0xD
	X 0
_0326	JSRP _00AA
	LEI 0x1
_0329	LBI 0, 0xF
	SC
	XAS
_032C	OBD	
	ING
	SKE		
	JMP 0x37D
_0333	XDS 0x0
	JP _032C
	SKC
	JP _0329
	RC
	XAS
	SKT
	JMP _0349
	LBI 2,9
	LD 0
	AISC 0x1
	XIS 0
; Page D
	LBI 2,0xA
	SKMBZ 0
	JP _0344
	JP _0349
_0344	LBI 2,0xB
	LD 0
	AISC 0xF
	JP _034C
	X 0
_0349	LBI 1,0xF
	JMP _032C
_034C	X 0
	LEI 0xD
_034F	SKGBZ 0
	JP _034F
_0352	SKGBZ 0
	JP _0356
	JP _0352
_0356	SKGBZ 0
	JSRP _009D 
	JSRP _009E
	JSRP _009D
	SC
	XAS
	JSRP _009E
	RC
	XAS
	JSRP _009D 
	LBI 2,0xE
_0362	RMB 0
	SKGBZ 0
	SMB 0
	RMB 1
	SKGBZ 0
	SMB 1
	RMB 2
	SKGBZ 0
	SMB 2
	RMB 3
	SKGBZ 0
	SMB 3
	X 0
	XIS 0
	JP _0362
	LEI 0x5
	LBI 2,0xE
	LDD 2,0xF
	CAMQ
	JP _0349

_037D	XOR
	X 0
	SKMBZ 0	
; Page E
	JP _0389
_0381	SKMBZ 1
	JP _0394
_0383	SKMBZ 2
	JP _03A1
_0385	SKMBZ 3
	JP _03B0
_0387	JMP _0333 

_0389	X 0
	SKMBZ 0
	JP _0390
	JSRP _0080
	JP _0381
	SMB 0
	JP _03A8
_0390	JSRP _008B 
	JP _0381
	RMB 0
	JP _03AE
_0394	X 0
	SKMBZ 1
	JP _039C
	JSRP _0080
	JP _0383 
	SMB 1
	AISC 0x2
	JP _03A8
_039C	JSRP _008B
	JP _0383
	RMB 1
	AISC 0x2
	JP _03AE 
_03A1	X 0
	SKMBZ 2
	JP _03AA
	JSRP _0080
	JP _0385
	SMB 2
	AISC 0x4
_03A8	JMP _03D2
_03AA	JSRP _008B
	JP _0385
	RMB 2
	AISC 0x4
_03AE	JMP _03CB
_03B0	X 0
	SKMBZ 3
	JMP _03C6
	SKC
	JP _03B7
	JP _03BD
_03B7	SKMBZ 3
	JP _03BA 
	JP _03BD
_03BA	SKMBZ 2
	JMP _03C0
_03BD	JSRP _0080
	JP _0387
	JP _03C3	
	
; Page F
_03C0	JSRP _008B 
	JMP _0387
_03C3	SMB 3
	AISC 0x6
	JP _03D2
_03C6	JSRP _008B
	JMP _0387 
	RMB 3
	AISC 0x6
_03CB	XAD 2,0x9
	CLRA
	AISC 0x7
	XAD 2,0x9 
	AISC 0x8
_03D2	SKC
	AISC 0x1
	XAD 3,0xE
	CBA
	XAD 3,0xF 
	RC
	XAS
	LBI 2,0xA
	SKMBZ 0
	JP _03E5
	LEI 0x9
	JSRP _00AA 
	LEI 0x1
	JMP _0329
_03E5	LEI 0xD
	JSRP _00AA
	LEI 0x5
	JMP _0329

_03EC	LBI 0,0x0
_03ED	CLRA
	AISC 0xF
	X 0
	LD 1
	X 3
	CLRA
	X 1
	CLRA
	XIS 3
	JP _03ED
_03F7	JMP _01E5 

_03F9	LDD 0,0x0	
	X 0	
	LBI 3,0
	JSRP _00AB
	LEI 0 

	end
